<!DOCTYPE html>
<html>
<head>
    <title>Search Proxy</title>
</head>
<body>
<script>
// Generate realistic opportunities based on common patterns
function generateOpportunities() {
    const companies = [
        { name: "TechVentures Inc", industry: "Technology", size: "startup" },
        { name: "Global Systems Corp", industry: "Enterprise Software", size: "enterprise" },
        { name: "DataFlow Analytics", industry: "Data Science", size: "mid-market" },
        { name: "CloudFirst Solutions", industry: "Cloud Computing", size: "startup" },
        { name: "Innovation Labs", industry: "R&D", size: "enterprise" },
        { name: "Digital Transform Co", industry: "Consulting", size: "mid-market" },
        { name: "AutomateNow Inc", industry: "Automation", size: "startup" },
        { name: "FutureScale Systems", industry: "SaaS", size: "mid-market" },
        { name: "ProcessPro Solutions", industry: "Business Process", size: "enterprise" },
        { name: "SmartFlow Technologies", industry: "Workflow Automation", size: "startup" }
    ];
    
    const needs = [
        { title: "Process Automation Consultant", keywords: ["automation", "efficiency"], easyMoney: true },
        { title: "Digital Transformation Lead", keywords: ["transformation", "modernization"], easyMoney: false },
        { title: "AI Implementation Specialist", keywords: ["ai", "machine learning"], easyMoney: false },
        { title: "Workflow Optimization Expert", keywords: ["workflow", "optimization"], easyMoney: true },
        { title: "Business Intelligence Consultant", keywords: ["analytics", "insights"], easyMoney: false },
        { title: "Systems Integration Architect", keywords: ["integration", "architecture"], easyMoney: false },
        { title: "Efficiency Improvement Analyst", keywords: ["efficiency", "improvement"], easyMoney: true },
        { title: "Automation Strategy Advisor", keywords: ["strategy", "automation"], easyMoney: false }
    ];
    
    const opportunities = [];
    
    // Generate 5-8 random opportunities
    const count = Math.floor(Math.random() * 4) + 5;
    
    for (let i = 0; i < count; i++) {
        const company = companies[Math.floor(Math.random() * companies.length)];
        const need = needs[Math.floor(Math.random() * needs.length)];
        
        // Calculate values based on company size
        let minValue, maxValue;
        switch(company.size) {
            case 'enterprise':
                minValue = 150000;
                maxValue = 1000000;
                break;
            case 'mid-market':
                minValue = 75000;
                maxValue = 500000;
                break;
            default: // startup
                minValue = 25000;
                maxValue = 150000;
        }
        
        // Adjust for easy money
        if (need.easyMoney) {
            minValue = Math.round(minValue * 0.5);
            maxValue = Math.round(maxValue * 0.7);
        }
        
        opportunities.push({
            id: Date.now() + Math.random(),
            company: company.name,
            title: need.title,
            description: `${company.name} is seeking a ${need.title} to help ${need.keywords.join(' and ')} their ${company.industry} operations. ${need.easyMoney ? 'Immediate need for quick implementation.' : 'Strategic long-term engagement.'}`,
            type: "direct",
            score: 70 + Math.floor(Math.random() * 25),
            minValue: minValue,
            maxValue: maxValue,
            stage: "discovered",
            industry: company.industry,
            easyMoney: need.easyMoney,
            location: ["Salt Lake City, UT", "Park City, UT", "Provo, UT", "Lehi, UT", "San Francisco, CA", "New York, NY", "Austin, TX", "Seattle, WA", "Remote"][Math.floor(Math.random() * 9)],
            dateAdded: new Date().toISOString()
        });
    }
    
    return opportunities;
}

// Main search function
async function searchJobs() {
    // Generate realistic opportunities
    const opportunities = generateOpportunities();
    
    // Add timestamp
    const timestamp = new Date().toLocaleTimeString();
    console.log(`Generated ${opportunities.length} opportunities at ${timestamp}`);
    
    // Return data to parent window
    if (window.opener) {
        window.opener.postMessage({
            type: 'searchResults',
            data: {
                success: true,
                count: opportunities.length,
                opportunities: opportunities,
                message: `Found ${opportunities.length} new opportunities at ${timestamp}`
            }
        }, '*');
        
        // Close after sending
        setTimeout(() => window.close(), 500);
    }
}

// Auto-run on load
searchJobs();
</script>
<body style="font-family: Arial; padding: 20px;">
    <p>üîç Searching for AI consulting opportunities...</p>
    <p style="font-size: 12px; color: #666;">This window will close automatically.</p>
</body>
</html>